# Example configuration for Loggamera Integration
# Copy this to your configuration.yaml

# Loggamera Custom Integration
sensor:
  - platform: loggamera
    sensors:
      - name: "Lake Vättern Temperature"
        location_id: 22
        scan_interval: 300  # 5 minutes (default)
      - name: "Lake Mullsjön Temperature"
        location_id: 21
        scan_interval: 600  # 10 minutes
      - name: "Vättern Fast Updates"
        location_id: 22
        scan_interval: 60   # 1 minute (minimum)
      - name: "Mullsjön Slow Updates"
        location_id: 21
        scan_interval: 3600 # 1 hour

# Alternative: REST Sensor as backup/comparison
rest:
  - resource: "https://portal.loggamera.se/PublicViews/OverviewInside"
    method: POST
    payload: "id=22"
    headers:
      Content-Type: "application/x-www-form-urlencoded"
    scan_interval: 300  # 5 minutes
    sensor:
      - name: "Vättern REST Backup"
        unique_id: "vattern_rest_backup"
        value_template: >-
          {% set ns = namespace(temp=None) %}
          {% for line in value.split('\n') %}
            {% set match = line | regex_findall('data-value="(-?\d+\.?\d*)"') %}
            {% if match %}
              {% set temp_val = match[0] | float %}
              {% if -5 <= temp_val <= 40 %}
                {% set ns.temp = temp_val %}
                {% break %}
              {% endif %}
            {% endif %}
          {% endfor %}
          {{ ns.temp }}
        unit_of_measurement: "°C"
        device_class: temperature
        state_class: measurement
        icon: "mdi:waves"

# Debug logging (add if you need troubleshooting)
logger:
  default: info
  logs:
    custom_components.loggamera: debug
    homeassistant.helpers.update_coordinator: debug

# Configuration Options:
# scan_interval: 60-43200 seconds (1 minute - 12 hours)
# - 60: 1 minute (minimum, frequent updates)
# - 300: 5 minutes (default, balanced)
# - 600: 10 minutes (moderate)
# - 1800: 30 minutes (slow)
# - 3600: 1 hour (very slow)
# - 43200: 12 hours (maximum, minimal updates) 